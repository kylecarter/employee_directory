var EmployeeDirectory;EmployeeDirectory=function(){var a,b,c,d;return b=new Object,d=function(a){$(document).ready(function(){EmployeeDirectory.utils.handleHashValues(a)})},c=function(){b={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},EmployeeDirectory.utils.handleHashValues(b)},a=function(){b={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},this.container=$("#application-data"),d(b),$(window).on("hashchange",function(){c()})},{initApp:a}}(),EmployeeDirectory.utils=function(){"use strict";var a,b,c,d,e;return b=function(){var a;return a=null!=$.cookie("loggedin")&&"no"!==$.cookie("loggedin")?!0:!1},a=function(){var a;return a=$.uriAnchor.makeAnchorMap()},e=function(){return $(".spinner").show()},d=function(){return $(".spinner").hide()},c=function(a){var b,c;b=$("#content"),console.log($.cookie(),a),c={reset:function(){return b.hasClass("reset-pswrd")?!1:void EmployeeDirectory.reset.configModule()},employee:function(){return console.log(a.anchor._page.id),b.hasClass("usr-profile")?!1:void EmployeeDirectory.employee.configModule(a.anchor._page.id)},p404:function(){return b.hasClass("notfound")?!1:void EmployeeDirectory.notfound.configModule()},signin:function(){return b.hasClass("loggedout")?!1:void EmployeeDirectory.login.configModule()}},a.status&&"employee"===a.anchor.page&&c.employee(),"reset"===a.anchor.page?($.cookie("loggined","no"),$.removeCookie("user"),c.reset()):"p404"===a.anchor.page?($.cookie("loggined","no"),$.removeCookie("user"),c.p404()):($.cookie("loggined","no"),$.removeCookie("user"),c.signin())},{getLoginStatus:b,getAppState:a,showLoading:e,hideLoading:d,handleHashValues:c}}(),EmployeeDirectory.create=function(){"use strict";var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory["delete"]=function(){"use strict";var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.premissions=function(){var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.read=function(){"use strict";var a,b;return b=function(a,b){var c,d;for(c=0,d=!1;c<user.length;){if(a===user[c].email&&b===user[c].password){d=user[c];break}c++}return d},a=function(a){var b;return b={},$.ajax({url:"/user/read/"+a,dataType:"json",type:"GET",success:function(a){console.log(a),a.length>0?($.uriAnchor.setAnchor({page:"employee",_page:{id:a[0].employee_id}}),EmployeeDirectory.employee.configModule(a[0])):($.uriAnchor.setAnchor({page:"p404"}),EmployeeDirectory.notfound.configModule({}))},error:function(a,b,c){console.log(a,b,c),$.uriAnchor.setAnchor({page:"p404"}),EmployeeDirectory.notfound.configModule({})}}),console.log(b),b},{verifyUser:b,validateUser:a}}(),EmployeeDirectory.update=function(){"use strict";var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.contact=function(){"use strict";var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.employee=function(){"use strict";var a,b,c,d,e;return b={params:null,templates:{shell:EmployeeDirectoryViews["hbs/UserProfile.hbs"],contacts:EmployeeDirectoryViews["hbs/ContactsList.hbs"],results:EmployeeDirectoryViews["hbs/SearchResults.hbs"],notfound:EmployeeDirectoryViews["hbs/EmployeeNotFound.hbs"]}},e={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},c=function(a){console.log(a),b.params=a.hasOwnProperty("employee_id")?a:EmployeeDirectory.read.validateUser(a),b.params?EmployeeDirectory.container.html(function(a,c){return b.templates.shell(b.params)}):($.uriAnchor.setAnchor({page:"p404"}),$.removeCookie("loggedin"),$.removeCookie("user"),EmployeeDirectory.notfound.configModule()),d()},a=function(a){a.html(function(a,c){return b.templates.contacts(b.params.contacts)})},d=function(){a($("#wrapper"))},{configModule:c}}(),EmployeeDirectory.login=function(){"use strict";var a,b,c,d,e,f,g,h;return a={params:null,templates:{login:EmployeeDirectoryViews["hbs/LoggedOut.hbs"]}},h={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},b=function(){EmployeeDirectory.container.html(function(b,c){return a.templates.login({})}),f()},f=function(){g($("#log-in"),$("#login-submit")),e($("#forgot"))},g=function(a,b){a.validate({rules:{user:{required:!0},password:{required:!0}},messages:{user:"Verify your user name is accurate.",password:"If you are having trouble with your password, you can request to change it."},validClass:"has-success control-label",errorClass:"has-error control-label",highlight:function(a,b,c){$(a).parent(".log-in__cmnpt").addClass("has-error").removeClass("has-success")},unhighlight:function(a,b,c){$(a).parent(".log-in__cmnpt").addClass("has-success").removeClass("has-error")}}),b.on("click touchend",function(){a.valid()&&d($("#user"),$("#password"))})},e=function(a){a.on("click touchend",function(){$.uriAnchor.setAnchor({page:"reset"}),EmployeeDirectory.reset.configModule()})},c=function(a,b){var c;c=EmployeeDirectory.read.verifyUser(a.val(),b.val()),c?($.uriAnchor.setAnchor({page:"employee",_page:{id:c.employee_id}}),$.cookie("loggedin","yes"),$.cookie("user",c.employee_id),EmployeeDirectory.employee.configModule(c)):form.after('<div class="container-fluid"><div class="col-sm-12"><p style="margin-top: 18px; font-size: 0.775em;">The information provided does not match a known employee. Please check the information you entered and try again. If you contine to have problems contact IT.</p></div></div>')},d=function(a,b){console.log(a,b),$.ajax({url:"/user/login/"+a.val()+"/"+b.val(),dataType:"json",type:"GET",success:function(a){a.length>0?($.uriAnchor.setAnchor({page:"employee",_page:{id:a[0].employee_id}}),$.cookie("loggedin","yes"),$.cookie("user",a[0].employee_id),EmployeeDirectory.employee.configModule(a[0])):($.uriAnchor.setAnchor({page:"p404"}),EmployeeDirectory.notfound.configModule({}))},error:function(a,b,c){console.log(a,b,c)}})},{configModule:b}}(),EmployeeDirectory.notfound=function(){"use strict";var a,b,c,d,e;return a={params:null,templates:{notfound:EmployeeDirectoryViews["hbs/EmployeeNotFound.hbs"]}},e={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},b=function(){EmployeeDirectory.container.html(function(b,c){return a.templates.notfound({})}),c()},c=function(){d($("#notfound"))},d=function(a){a.on("click touchend",function(){$.uriAnchor.setAnchor({page:"signin"}),EmployeeDirectory.login.configModule()})},{configModule:b}}(),EmployeeDirectory.reset=function(){"use strict";var a,b,c,d,e,f;return a={params:null,templates:{reset:EmployeeDirectoryViews["hbs/ResetPsswrd.hbs"]}},f={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},b=function(){EmployeeDirectory.container.html(function(b,c){return a.templates.reset({})}),c()},c=function(){d($("#reset"),$("#request-submit")),e($("#sign-in"))},d=function(a,b){a.validate({rules:{email:{required:!0}},messages:{user:"Verify your email address is accurate.",required:"A valid email address is needed to reset your password."},validClass:"has-success control-label",errorClass:"has-error control-label",highlight:function(a,b,c){$(a).parent(".log-in__cmnpt").addClass("has-error").removeClass("has-success")},unhighlight:function(a,b,c){$(a).parent(".log-in__cmnpt").addClass("has-success").removeClass("has-error")}}),b.on("click touchend",function(){var b;a.valid()&&(EmployeeDirectory.utils.showLoading(),b=window.setTimeout(function(){a.hide(),$("#request-sent").show(),EmployeeDirectory.utils.hideLoading(),window.clearTimeout(b)},900))})},e=function(a){a.on("click touchend",function(){$.uriAnchor.setAnchor({page:"signin"}),EmployeeDirectory.login.configModule()})},{configModule:b}}(),EmployeeDirectory.search=function(){"use strict";var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.shell=function(){var a,b;return b={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},a=function(){EmployeeDirectory.utils.handleHashValues()},{initModule:a}}();