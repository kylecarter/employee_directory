var EmployeeDirectory;EmployeeDirectory=function(){var a;return a=function(){var a,b;a={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},this.container=$("#application-data"),console.log(a,$.cookie()),"reset"!==a.anchor.page||a.status?a.status&&"profile"===a.anchor.page&&(null!=$.cookie("user")||a.anchor.user)?(console.log("user profile: "+$.cookie("user")),b=null==$.cookie("user")?$.cookie("user"):a.anchor.user,EmployeeDirectory.profile.configModule(this.container,b)):"404"===a.anchor.page?(console.log("not found"),EmployeeDirectory.notfound.configModule(this.container)):(console.log("login"),EmployeeDirectory.shell.initModule(this.container)):(console.log("reset password"),EmployeeDirectory.reset.configModule(this.container))},{initApp:a}}(),EmployeeDirectory.utils=function(){var a,b,c,d;return b=function(){var a;return a=null!=$.cookie("loggedin")&&"no"!==$.cookie("loggedin")?!0:!1},a=function(){var a;return a=$.uriAnchor.makeAnchorMap()},d=function(){return $(".spinner").show()},c=function(){return $(".spinner").hide()},{getLoginStatus:b,getAppState:a,showLoading:d,hideLoading:c}}(),EmployeeDirectory.create=function(){var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory["delete"]=function(){var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.premissions=function(){var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.read=function(){var a,b;return b=function(a,b){var c,d;for(c=0,d=!1;c<user.length;){if(a===user[c].email&&b===user[c].password){d=user[c];break}c++}return d},a=function(a){var b,c;for(b=0,c=!1;b<user.length;){if(a===user[b].employee_id){c=user[b];break}b++}return c},{verifyUser:b,validateUser:a}}(),EmployeeDirectory.update=function(){var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.contact=function(){var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.login=function(){var a,b,c,d,e,f,g;return a={params:null,templates:{login:EmployeeDirectoryViews["hbs/LoggedOut.hbs"]}},g={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},b=function(){EmployeeDirectory.container.html(function(b,c){return a.templates.login({})}),e()},e=function(){f($("#log-in"),$("#login-submit")),d($("#forgot"))},f=function(a,b){a.validate({rules:{user:{required:!0},password:{required:!0}},messages:{user:"Verify your user name is accurate.",password:"If you are having trouble with your password, you can request to change it."},validClass:"has-success control-label",errorClass:"has-error control-label",highlight:function(a,b,c){$(a).parent(".log-in__cmnpt").addClass("has-error").removeClass("has-success")},unhighlight:function(a,b,c){$(a).parent(".log-in__cmnpt").addClass("has-success").removeClass("has-error")}}),b.on("click touchend",function(){a.valid()&&c($("#user"),$("#password"))})},d=function(a){a.on("click touchend",function(){$.uriAnchor.setAnchor({page:"reset"}),EmployeeDirectory.reset.configModule()})},c=function(a,b){var c;c=EmployeeDirectory.read.verifyUser(a.val(),b.val()),c?(console.log("fired call profile"),$.uriAnchor.setAnchor({page:"profile",_page:{id:c.employee_id}}),$.cookie("loggedin","yes"),$.cookie("user",c.employee_id),EmployeeDirectory.profile.initModule(c)):form.after('<div class="container-fluid"><div class="col-sm-12"><p style="margin-top: 18px; font-size: 0.775em;">The information provided does not match a known employee. Please check the information you entered and try again. If you contine to have problems contact IT.</p></div></div>')},{configModule:b}}(),EmployeeDirectory.notfound=function(){var a,b,c,d,e;return a={params:null,templates:{notfound:EmployeeDirectoryViews["hbs/EmployeeNotFound.hbs"]}},e={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},b=function(){EmployeeDirectory.container.html(function(b,c){return a.templates.notfound({})}),c()},c=function(){d($("#notfound"))},d=function(a){a.on("click touchend",function(){$.uriAnchor.setAnchor({page:"signin"}),EmployeeDirectory.login.configModule()})},{configModule:b}}(),EmployeeDirectory.profile=function(){var a,b,c,d,e;return b={params:null,templates:{shell:EmployeeDirectoryViews["hbs/UserProfile.hbs"],contacts:EmployeeDirectoryViews["hbs/ContactsList.hbs"],results:EmployeeDirectoryViews["hbs/SearchResults.hbs"],notfound:EmployeeDirectoryViews["hbs/EmployeeNotFound.hbs"]}},e={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},c=function(a){var b;b=EmployeeDirectory.read.validateUser(a),b?d(b):($.uriAnchor.setAnchor({page:"404"}),$.removeCookie("loggedin"),$.removeCookie("user"),EmployeeDirectory.notfound.initModule())},a=function(){console.log(b.params),EmployeeDirectory.container.html(function(a,c){return b.templates.shell(b.params)})},d=function(c){b.params=c,a()},{configModule:c,initModule:d}}(),EmployeeDirectory.reset=function(){var a,b,c,d,e,f;return a={params:null,templates:{reset:EmployeeDirectoryViews["hbs/ResetPsswrd.hbs"]}},f={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},b=function(){EmployeeDirectory.container.html(function(b,c){return a.templates.reset({})}),c()},c=function(){d($("#reset"),$("#request-submit")),e($("#sign-in"))},d=function(a,b){a.validate({rules:{email:{required:!0}},messages:{user:"Verify your email address is accurate.",required:"A valid email address is needed to reset your password."},validClass:"has-success control-label",errorClass:"has-error control-label",highlight:function(a,b,c){$(a).parent(".log-in__cmnpt").addClass("has-error").removeClass("has-success")},unhighlight:function(a,b,c){$(a).parent(".log-in__cmnpt").addClass("has-success").removeClass("has-error")}}),b.on("click touchend",function(){var b;a.valid()&&(EmployeeDirectory.utils.showLoading(),b=window.setTimeout(function(){a.hide(),$("#request-sent").show(),EmployeeDirectory.utils.hideLoading(),window.clearTimeout(b)},900))})},e=function(a){a.on("click touchend",function(){$.uriAnchor.setAnchor({page:"signin"}),EmployeeDirectory.login.configModule()})},{configModule:b}}(),EmployeeDirectory.search=function(){var a,b,c,d,e;return a=new Object,e=new Object,d=new Object,b=function(){},c=function(){},{configModule:b,initModule:c}}(),EmployeeDirectory.shell=function(){var a,b,c;return c={status:EmployeeDirectory.utils.getLoginStatus(),anchor:EmployeeDirectory.utils.getAppState()},b=function(a){c.status?EmployeeDirectory.profile.configModule(a):EmployeeDirectory.login.configModule(a)},a=function(a){b(a)},{initModule:a}}();